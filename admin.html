<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Â· Antifraude SAT</title>

<style>
body{font-family:system-ui;background:#f1f5f9;margin:0}
.container{max-width:900px;margin:auto;padding:20px}
.card{background:#fff;border-radius:14px;padding:20px;margin-bottom:20px;
box-shadow:0 6px 16px rgba(0,0,0,.08)}
input,button{padding:10px;width:100%;margin-top:6px}
button{background:#2563eb;color:#fff;border:none;border-radius:10px}
ul{padding-left:18px}
small{color:#64748b}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ›¡ï¸ Admin Â· Antifraude SAT</h1>

<div class="card">
<h3>â• Crear usuario</h3>
<input id="newUser" placeholder="Usuario">
<input id="newPass" placeholder="ContraseÃ±a">
<button onclick="createUser()">Crear usuario</button>
</div>

<div class="card">
<h3>ğŸ‘¥ Usuarios</h3>
<ul id="userList"></ul>
</div>

<div class="card">
<h3>ğŸ“„ Historial de anÃ¡lisis</h3>
<ul id="history"></ul>
</div>

<small>Panel local Â· Fase 1 Â· Sin Firebase</small>

</div>

<script>
function getUsers(){
  return JSON.parse(localStorage.getItem("users") || "[]");
}
function saveUsers(u){
  localStorage.setItem("users", JSON.stringify(u));
}

function createUser(){
  const u=newUser.value.trim();
  const p=newPass.value.trim();
  if(!u||!p) return alert("Datos incompletos");

  const users=getUsers();
  if(users.find(x=>x.username===u))
    return alert("Usuario ya existe");

  users.push({username:u,password:p,role:"user"});
  saveUsers(users);
  newUser.value="";newPass.value="";
  loadUsers();
}

function loadUsers(){
  const users=getUsers();
  userList.innerHTML=users.map(u=>`<li>${u.username}</li>`).join("");
}

function loadHistory(){
  const data=JSON.parse(localStorage.getItem("analysis")||"[]");
  history.innerHTML=data.reverse().map(d=>`
    <li>
      <b>${d.user}</b> Â· ${d.date}<br>
      ${d.result} (Score ${d.score})
    </li>
  `).join("");
}

loadUsers();
loadHistory();
</script>
</body>
</html>
