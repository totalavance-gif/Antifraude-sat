<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Antifraude SAT</title>

<style>
body{font-family:system-ui;background:#f8fafc;margin:0}
.container{max-width:900px;margin:auto;padding:20px}
.card{background:#fff;border-radius:14px;padding:20px;margin-bottom:20px;
box-shadow:0 6px 16px rgba(0,0,0,.08)}
input,button{padding:10px;width:100%;margin-top:6px}
button{background:#16a34a;color:#fff;border:none;border-radius:10px}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div id="loginBox" class="card">
<h2>游댏 Acceso Antifraude</h2>
<input id="user" placeholder="Usuario">
<input id="pass" type="password" placeholder="Contrase침a">
<button onclick="login()">Entrar</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<h2>游댌 Antifraude SAT</h2>
<p>Usuario: <b id="currentUser"></b></p>

<div class="card">
<h3>Simulaci칩n de an치lisis</h3>
<button onclick="fakeAnalysis()">Ejecutar an치lisis</button>
</div>

<div id="result"></div>

</div>
</div>

<script>
function getUsers(){
  return JSON.parse(localStorage.getItem("users")||"[]");
}

function login(){
  const u=user.value.trim();
  const p=pass.value.trim();
  const users=getUsers();
  const ok=users.find(x=>x.username===u&&x.password===p);
  if(!ok) return alert("Credenciales inv치lidas");

  localStorage.setItem("sessionUser",u);
  startApp();
}

function startApp(){
  const u=localStorage.getItem("sessionUser");
  if(!u) return;
  loginBox.classList.add("hidden");
  app.classList.remove("hidden");
  currentUser.textContent=u;
}

function saveAnalysis(score,result){
  const user=localStorage.getItem("sessionUser");
  const data=JSON.parse(localStorage.getItem("analysis")||"[]");
  data.push({
    user,
    score,
    result,
    date:new Date().toLocaleString()
  });
  localStorage.setItem("analysis",JSON.stringify(data));
}

function fakeAnalysis(){
  const score=Math.floor(Math.random()*10);
  const result=score>=7?"游댮 POSIBLE CLON":score>=3?"游리 SOSPECHOSO":"游릭 ORIGINAL";
  saveAnalysis(score,result);
  resultDiv.innerHTML=`<div class="card"><b>${result}</b><br>Score ${score}</div>`;
}

startApp();
</script>
</body>
</html>
